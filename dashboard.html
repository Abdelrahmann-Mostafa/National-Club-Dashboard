<!DOCTYPE html>
<html>
<head>
    <title>National Club Dashboard</title>
    <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/xy.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/percent.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background-color: #f5f5f5; }
        .dashboard-title { text-align: center; color: #2c3e50; margin-bottom: 30px; }
        .chart-container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin: 20px 0;
            padding: 20px;
        }
        .chart-row { display: flex; gap: 20px; margin-bottom: 20px; }
        .chart-item { flex: 1; }
        .chart-title { font-size: 18px; font-weight: bold; color: #34495e; margin-bottom: 10px; }
        .filter-section {
            background: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        .filter-controls { display: flex; gap: 15px; align-items: center; }
        select { padding: 8px; border: 1px solid #bdc3c7; border-radius: 4px; }
        button {
            background: #3498db;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover { background: #2980b9; }
    </style>
</head>
<body>
    <h1 class="dashboard-title">üèÜ National Club Interactive Dashboard</h1>

    <div class="filter-section">
        <div class="filter-controls">
            <label><strong>Filter by Branch:</strong></label>
            <select id="branchFilter">
                <option value="all">All Branches</option>
                <option value="Cairo">Cairo</option>
                <option value="Alexandria">Alexandria</option>
                <option value="Giza">Giza</option>
                <option value="Port Said">Port Said</option>
                <option value="Suez">Suez</option>
            </select>
            <button onclick="applyFilters()">Apply Filters</button>
            <button onclick="resetFilters()">Reset</button>
        </div>
    </div>

    <div class="chart-container">
        <div class="chart-title">üìä Games Participation & Revenue</div>
        <div id="gamesChart" style="width: 100%; height: 400px;"></div>
    </div>

    <div class="chart-row">
        <div class="chart-item chart-container">
            <div class="chart-title">ü•á Player Ranks Distribution</div>
            <div id="ranksChart" style="width: 100%; height: 300px;"></div>
        </div>
        <div class="chart-item chart-container">
            <div class="chart-title">üè¢ Branch Performance</div>
            <div id="branchesChart" style="width: 100%; height: 300px;"></div>
        </div>
    </div>

    <div class="chart-container">
        <div class="chart-title">üí∞ Monthly Income vs Expenses</div>
        <div id="incomeChart" style="width: 100%; height: 400px;"></div>
    </div>

    <div class="chart-container">
        <div class="chart-title">üéØ Game Distribution by Branch</div>
        <div id="gameBranchChart" style="width: 100%; height: 400px;"></div>
    </div>

    <div class="chart-container">
        <div class="chart-title">üë• Top Players by Achievements</div>
        <div id="playersChart" style="width: 100%; height: 400px;"></div>
    </div>

    <script>
        // Sample data - in real implementation, this would come from Python/database
        const gamesData = [
            {"game": "Football", "participants": 245, "revenue": 45678},
            {"game": "Basketball", "participants": 189, "revenue": 38765},
            {"game": "Volleyball", "participants": 156, "revenue": 29432},
            {"game": "Tennis", "participants": 98, "revenue": 52134},
            {"game": "Swimming", "participants": 267, "revenue": 67890},
            {"game": "Athletics", "participants": 178, "revenue": 41256}
        ];

        const rankData = [
            {"rank": "Gold", "count": 5},
            {"rank": "Silver", "count": 4},
            {"rank": "Bronze", "count": 3},
            {"rank": "Platinum", "count": 3}
        ];

        const branchesData = [
            {"branch": "Cairo", "members": 456, "income": 125000},
            {"branch": "Alexandria", "members": 387, "income": 98000},
            {"branch": "Giza", "members": 298, "income": 87500},
            {"branch": "Port Said", "members": 234, "income": 67800},
            {"branch": "Suez", "members": 198, "income": 56400},
            {"branch": "Ismailia", "members": 167, "income": 45200},
            {"branch": "Tanta", "members": 145, "income": 38900}
        ];

        const incomeData = [
            {"month": "Jan", "income": 75000, "expenses": 45000},
            {"month": "Feb", "income": 82000, "expenses": 48000},
            {"month": "Mar", "income": 91000, "expenses": 52000},
            {"month": "Apr", "income": 88000, "expenses": 51000},
            {"month": "May", "income": 95000, "expenses": 55000},
            {"month": "Jun", "income": 105000, "expenses": 58000},
            {"month": "Jul", "income": 112000, "expenses": 62000},
            {"month": "Aug", "income": 108000, "expenses": 59000},
            {"month": "Sep", "income": 98000, "expenses": 54000},
            {"month": "Oct", "income": 102000, "expenses": 57000},
            {"month": "Nov", "income": 115000, "expenses": 63000},
            {"month": "Dec", "income": 120000, "expenses": 65000}
        ];

        const gameBranchData = [
            {"branch": "Cairo", "Football": 2, "Basketball": 1, "Volleyball": 1, "Tennis": 1, "Swimming": 2, "Athletics": 1},
            {"branch": "Alexandria", "Football": 1, "Basketball": 2, "Volleyball": 1, "Tennis": 1, "Swimming": 1, "Athletics": 1},
            {"branch": "Giza", "Football": 1, "Basketball": 1, "Volleyball": 2, "Tennis": 1, "Swimming": 1, "Athletics": 1},
            {"branch": "Port Said", "Football": 1, "Basketball": 1, "Volleyball": 1, "Tennis": 2, "Swimming": 1, "Athletics": 1},
            {"branch": "Suez", "Football": 1, "Basketball": 1, "Volleyball": 1, "Tennis": 1, "Swimming": 1, "Athletics": 2}
        ];

        const playersData = [
            {"name": "Ahmed Mohamed", "game": "Football", "branch": "Cairo", "rank": "Gold", "experience_years": 5, "achievements": 8},
            {"name": "Mohamed Ali", "game": "Basketball", "branch": "Alexandria", "rank": "Silver", "experience_years": 7, "achievements": 11},
            {"name": "Fatima Hassan", "game": "Volleyball", "branch": "Giza", "rank": "Bronze", "experience_years": 3, "achievements": 6},
            {"name": "Sara Ahmed", "game": "Tennis", "branch": "Port Said", "rank": "Platinum", "experience_years": 4, "achievements": 9},
            {"name": "Omar Khaled", "game": "Swimming", "branch": "Suez", "rank": "Gold", "experience_years": 6, "achievements": 12},
            {"name": "Laila Mahmoud", "game": "Athletics", "branch": "Cairo", "rank": "Silver", "experience_years": 8, "achievements": 14},
            {"name": "Karim Hassan", "game": "Football", "branch": "Alexandria", "rank": "Platinum", "experience_years": 9, "achievements": 19},
            {"name": "Nour El-Din", "game": "Basketball", "branch": "Giza", "rank": "Bronze", "experience_years": 2, "achievements": 4},
            {"name": "Youssef Ibrahim", "game": "Volleyball", "branch": "Port Said", "rank": "Gold", "experience_years": 5, "achievements": 10},
            {"name": "Amina Saleh", "game": "Tennis", "branch": "Suez", "rank": "Silver", "experience_years": 4, "achievements": 7}
        ];

        let currentBranchFilter = 'all';

        am5.ready(function() {
            // Create root elements
            const gamesRoot = am5.Root.new("gamesChart");
            const ranksRoot = am5.Root.new("ranksChart");
            const branchesRoot = am5.Root.new("branchesChart");
            const incomeRoot = am5.Root.new("incomeChart");
            const gameBranchRoot = am5.Root.new("gameBranchChart");
            const playersRoot = am5.Root.new("playersChart");

            // Set themes
            [gamesRoot, ranksRoot, branchesRoot, incomeRoot, gameBranchRoot, playersRoot].forEach(root => {
                root.setThemes([am5themes_Animated.new(root)]);
            });

            // 1. Games Chart - Column chart with dual axes
            const gamesChart = gamesRoot.container.children.push(
                am5xy.XYChart.new(gamesRoot, {
                    panX: false,
                    panY: false,
                    wheelX: "panX",
                    wheelY: "zoomX",
                    layout: gamesRoot.verticalLayout
                })
            );

            const gamesXRenderer = am5xy.AxisRendererX.new(gamesRoot, {});
            const gamesXAxis = gamesChart.xAxes.push(
                am5xy.CategoryAxis.new(gamesRoot, {
                    categoryField: "game",
                    renderer: gamesXRenderer,
                    tooltip: am5.Tooltip.new(gamesRoot, {})
                })
            );

            const gamesYRenderer = am5xy.AxisRendererY.new(gamesRoot, {});
            const gamesYAxis = gamesChart.yAxes.push(
                am5xy.ValueAxis.new(gamesRoot, {
                    renderer: gamesYRenderer,
                    tooltip: am5.Tooltip.new(gamesRoot, {})
                })
            );

            const gamesSeries1 = gamesChart.series.push(
                am5xy.ColumnSeries.new(gamesRoot, {
                    name: "Participants",
                    xAxis: gamesXAxis,
                    yAxis: gamesYAxis,
                    valueYField: "participants",
                    categoryXField: "game",
                    tooltip: am5.Tooltip.new(gamesRoot, {
                        labelText: "{{categoryX}}: [bold]{{valueY}}[/] participants"
                    })
                })
            );
            gamesSeries1.columns.template.setAll({
                fill: am5.color(0x3498db),
                stroke: am5.color(0x2980b9)
            });

            const gamesSeries2 = gamesChart.series.push(
                am5xy.LineSeries.new(gamesRoot, {
                    name: "Revenue",
                    xAxis: gamesXAxis,
                    yAxis: gamesYAxis,
                    valueYField: "revenue",
                    categoryXField: "game",
                    tooltip: am5.Tooltip.new(gamesRoot, {
                        labelText: "Revenue: [bold]${{valueY}}[/]"
                    })
                })
            );
            gamesSeries2.strokes.template.setAll({
                strokeWidth: 3,
                stroke: am5.color(0xe74c3c)
            });
            gamesSeries2.bullets.push(function() {
                return am5.Bullet.new(gamesRoot, {
                    sprite: am5.Circle.new(gamesRoot, {
                        radius: 5,
                        fill: am5.color(0xe74c3c)
                    })
                });
            });

            gamesXAxis.data.setAll(gamesData);
            gamesSeries1.data.setAll(gamesData);
            gamesSeries2.data.setAll(gamesData);

            // Legend
            const gamesLegend = gamesChart.children.push(
                am5.Legend.new(gamesRoot, {
                    centerX: am5.percent(50),
                    x: am5.percent(50)
                })
            );
            gamesLegend.data.setAll(gamesChart.series.values);

            // 2. Ranks Chart - Pie chart
            const ranksChart = ranksRoot.container.children.push(
                am5percent.PieChart.new(ranksRoot, {
                    layout: ranksRoot.verticalLayout
                })
            );

            const ranksSeries = ranksChart.series.push(
                am5percent.PieSeries.new(ranksRoot, {
                    valueField: "count",
                    categoryField: "rank",
                    tooltip: am5.Tooltip.new(ranksRoot, {
                        labelText: "{{category}}: [bold]{{value}}[/] players"
                    })
                })
            );

            ranksSeries.slices.template.setAll({
                stroke: am5.color(0xffffff),
                strokeWidth: 2
            });

            ranksSeries.data.setAll(rankData);

            // Legend
            const ranksLegend = ranksChart.children.push(
                am5.Legend.new(ranksRoot, {
                    centerX: am5.percent(50),
                    x: am5.percent(50)
                })
            );
            ranksLegend.data.setAll(ranksSeries.dataItems);

            // 3. Branches Chart - Bar chart
            const branchesChart = branchesRoot.container.children.push(
                am5xy.XYChart.new(branchesRoot, {
                    panX: false,
                    panY: false,
                    wheelX: "panX",
                    wheelY: "zoomX"
                })
            );

            const branchesYRenderer = am5xy.AxisRendererY.new(branchesRoot, {});
            const branchesYAxis = branchesChart.yAxes.push(
                am5xy.CategoryAxis.new(branchesRoot, {
                    categoryField: "branch",
                    renderer: branchesYRenderer,
                    tooltip: am5.Tooltip.new(branchesRoot, {})
                })
            );
            branchesYAxis.get("renderer").labels.template.setAll({
                fontSize: 12
            });

            const branchesXRenderer = am5xy.AxisRendererX.new(branchesRoot, {});
            const branchesXAxis = branchesChart.xAxes.push(
                am5xy.ValueAxis.new(branchesRoot, {
                    renderer: branchesXRenderer,
                    tooltip: am5.Tooltip.new(branchesRoot, {})
                })
            );

            const branchesSeries = branchesChart.series.push(
                am5xy.ColumnSeries.new(branchesRoot, {
                    name: "Members",
                    xAxis: branchesXAxis,
                    yAxis: branchesYAxis,
                    valueXField: "members",
                    categoryYField: "branch",
                    tooltip: am5.Tooltip.new(branchesRoot, {
                        labelText: "{{categoryY}}: [bold]{{valueX}}[/] members\\nIncome: [bold]${{income}}[/]"
                    })
                })
            );
            branchesSeries.columns.template.setAll({
                fill: am5.color(0x27ae60),
                stroke: am5.color(0x229954)
            });

            branchesYAxis.data.setAll(branchesData);
            branchesSeries.data.setAll(branchesData);

            // 4. Income Chart - Area chart
            const incomeChart = incomeRoot.container.children.push(
                am5xy.XYChart.new(incomeRoot, {
                    panX: false,
                    panY: false,
                    wheelX: "panX",
                    wheelY: "zoomX"
                })
            );

            const incomeXRenderer = am5xy.AxisRendererX.new(incomeRoot, {});
            const incomeXAxis = incomeChart.xAxes.push(
                am5xy.CategoryAxis.new(incomeRoot, {
                    categoryField: "month",
                    renderer: incomeXRenderer,
                    tooltip: am5.Tooltip.new(incomeRoot, {})
                })
            );

            const incomeYRenderer = am5xy.AxisRendererY.new(incomeRoot, {});
            const incomeYAxis = incomeChart.yAxes.push(
                am5xy.ValueAxis.new(incomeRoot, {
                    renderer: incomeYRenderer,
                    tooltip: am5.Tooltip.new(incomeRoot, {})
                })
            );

            const incomeSeries = incomeChart.series.push(
                am5xy.LineSeries.new(incomeRoot, {
                    name: "Income",
                    xAxis: incomeXAxis,
                    yAxis: incomeYAxis,
                    valueYField: "income",
                    categoryXField: "month",
                    tooltip: am5.Tooltip.new(incomeRoot, {
                        labelText: "Income: [bold]${{valueY}}[/]"
                    }),
                    stroke: am5.color(0x27ae60),
                    fill: am5.color(0x27ae60)
                })
            );

            const expenseSeries = incomeChart.series.push(
                am5xy.LineSeries.new(incomeRoot, {
                    name: "Expenses",
                    xAxis: incomeXAxis,
                    yAxis: incomeYAxis,
                    valueYField: "expenses",
                    categoryXField: "month",
                    tooltip: am5.Tooltip.new(incomeRoot, {
                        labelText: "Expenses: [bold]${{valueY}}[/]"
                    }),
                    stroke: am5.color(0xe74c3c),
                    fill: am5.color(0xe74c3c)
                })
            );

            incomeXAxis.data.setAll(incomeData);
            incomeSeries.data.setAll(incomeData);
            expenseSeries.data.setAll(incomeData);

            // Legend
            const incomeLegend = incomeChart.children.push(
                am5.Legend.new(incomeRoot, {
                    centerX: am5.percent(50),
                    x: am5.percent(50)
                })
            );
            incomeLegend.data.setAll(incomeChart.series.values);

            // 5. Game Branch Chart - Stacked bar chart
            const gameBranchChart = gameBranchRoot.container.children.push(
                am5xy.XYChart.new(gameBranchRoot, {
                    panX: false,
                    panY: false,
                    wheelX: "panX",
                    wheelY: "zoomX",
                    layout: gameBranchRoot.verticalLayout
                })
            );

            const gameBranchYRenderer = am5xy.AxisRendererY.new(gameBranchRoot, {});
            const gameBranchYAxis = gameBranchChart.yAxes.push(
                am5xy.CategoryAxis.new(gameBranchRoot, {
                    categoryField: "branch",
                    renderer: gameBranchYRenderer,
                    tooltip: am5.Tooltip.new(gameBranchRoot, {})
                })
            );

            const gameBranchXRenderer = am5xy.AxisRendererX.new(gameBranchRoot, {});
            const gameBranchXAxis = gameBranchChart.xAxes.push(
                am5xy.ValueAxis.new(gameBranchRoot, {
                    renderer: gameBranchXRenderer,
                    tooltip: am5.Tooltip.new(gameBranchRoot, {})
                })
            );

            // Create series for each game
            const gameColors = [
                am5.color(0x3498db), am5.color(0xe74c3c), am5.color(0x2ecc71),
                am5.color(0xf39c12), am5.color(0x9b59b6), am5.color(0x1abc9c)
            ];

            const games = ["Football", "Basketball", "Volleyball", "Tennis", "Swimming", "Athletics"];
            games.forEach((game, index) => {
                const series = gameBranchChart.series.push(
                    am5xy.ColumnSeries.new(gameBranchRoot, {
                        name: game,
                        xAxis: gameBranchXAxis,
                        yAxis: gameBranchYAxis,
                        valueXField: game.toLowerCase(),
                        categoryYField: "branch",
                        stacked: true,
                        tooltip: am5.Tooltip.new(gameBranchRoot, {
                            labelText: game + ": [bold]{{valueX}}[/] players"
                        })
                    })
                );
                series.columns.template.setAll({
                    fill: gameColors[index],
                    stroke: am5.color(0xffffff),
                    strokeWidth: 1
                });
                series.data.setAll(gameBranchData);
            });

            gameBranchYAxis.data.setAll(gameBranchData);

            // Legend
            const gameBranchLegend = gameBranchChart.children.push(
                am5.Legend.new(gameBranchRoot, {
                    centerX: am5.percent(50),
                    x: am5.percent(50)
                })
            );
            gameBranchLegend.data.setAll(gameBranchChart.series.values);

            // 6. Players Chart - Horizontal bar chart for top players
            const topPlayers = playersData
                .sort((a, b) => b.achievements - a.achievements)
                .slice(0, 10);

            const playersChart = playersRoot.container.children.push(
                am5xy.XYChart.new(playersRoot, {
                    panX: false,
                    panY: false,
                    wheelX: "panX",
                    wheelY: "zoomX"
                })
            );

            const playersXRenderer = am5xy.AxisRendererX.new(playersRoot, {});
            const playersXAxis = playersChart.xAxes.push(
                am5xy.ValueAxis.new(playersRoot, {
                    renderer: playersXRenderer,
                    tooltip: am5.Tooltip.new(playersRoot, {})
                })
            );

            const playersYRenderer = am5xy.AxisRendererY.new(playersRoot, {});
            const playersYAxis = playersChart.yAxes.push(
                am5xy.CategoryAxis.new(playersRoot, {
                    categoryField: "name",
                    renderer: playersYRenderer,
                    tooltip: am5.Tooltip.new(playersRoot, {})
                })
            );
            playersYAxis.get("renderer").labels.template.setAll({
                fontSize: 12
            });

            const playersSeries = playersChart.series.push(
                am5xy.ColumnSeries.new(playersRoot, {
                    name: "Achievements",
                    xAxis: playersXAxis,
                    yAxis: playersYAxis,
                    valueXField: "achievements",
                    categoryYField: "name",
                    tooltip: am5.Tooltip.new(playersRoot, {
                        labelText: "{{categoryY}}\\nGame: {{game}}\\nBranch: {{branch}}\\nRank: {{rank}}\\nExperience: {{experience_years}} years\\nAchievements: [bold]{{valueX}}[/]"
                    })
                })
            );
            playersSeries.columns.template.setAll({
                fill: am5.color(0xf39c12),
                stroke: am5.color(0xe67e22)
            });

            playersYAxis.data.setAll(topPlayers);
            playersSeries.data.setAll(topPlayers);

        }); // end am5.ready

        // Filter functions
        function applyFilters() {
            currentBranchFilter = document.getElementById('branchFilter').value;
            console.log('Filter applied:', currentBranchFilter);
            // Note: In a full implementation, this would update all charts based on the filter
        }

        function resetFilters() {
            document.getElementById('branchFilter').value = 'all';
            currentBranchFilter = 'all';
            console.log('Filters reset');
        }
    </script>
</body>
</html>
